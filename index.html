<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orbital Graveyard – Space Debris Dashboard</title>

    <link rel="stylesheet" href="css/styles.css">

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/satellite.js/4.0.0/satellite.min.js"></script>
</head>
<body>

<!-- ===== HEADER / NAV ===== -->
<header>
    <div class="header-left">
        <h1>⟐ ORBITAL GRAVEYARD</h1>
        <span class="header-sub">Space Debris Situational Awareness</span>
    </div>
    <nav class="tab-nav">
        <button class="tab-btn active" data-viz="globe">Live Tracker</button>
        <button class="tab-btn" data-viz="altitude">Altitude Distribution</button>
        <button class="tab-btn" data-viz="heatmap">Orbital Regime Map</button>
        <button class="tab-btn" data-viz="timeline">Debris Timeline</button>
    </nav>
</header>

<!-- ===== MAIN VIZ AREA ===== -->
<div class="main-area">

    <!-- Loader -->
    <div id="loader">
        <div class="loader-spinner"></div>
        <p>Loading orbital data...</p>
    </div>

    <!-- Shared tooltip -->
    <div id="tooltip"></div>

    <!-- ===== VIZ 1: LIVE TRACKER ===== -->
    <div id="globe" class="viz-panel active">
        <!-- Floating controls top-left -->
        <div class="control-panel" id="globe-controls">
            <div class="control-group">
                <label>Objects displayed</label>
                <input type="range" id="sat-count-slider" min="500" max="13000" step="500" value="5000">
                <span id="sat-count-label">5000</span>
            </div>
            <div class="control-group">
                <label>Time warp</label>
                <select id="time-warp">
                    <option value="1">1× (Real-time)</option>
                    <option value="10">10×</option>
                    <option value="100" selected>100×</option>
                    <option value="1000">1000×</option>
                </select>
            </div>
            <div class="control-group">
                <label>Projection</label>
                <div class="toggle-switch">
                    <button class="proj-btn active" data-proj="3d">3D Globe</button>
                    <button class="proj-btn" data-proj="2d">2D Map</button>
                </div>
            </div>
            <div class="control-group">
                <label>Search satellite</label>
                <input type="text" id="sat-search" placeholder="e.g. ISS, COSMOS..." autocomplete="off">
                <div id="search-results"></div>
            </div>
            <div class="control-group">
                <label>Filter by regime</label>
                <div class="checkbox-group">
                    <label><input type="checkbox" id="filter-leo" checked> <span class="dot leo"></span> LEO (&lt;2,000 km)</label>
                    <label><input type="checkbox" id="filter-meo" checked> <span class="dot meo"></span> MEO (2,000–35,786 km)</label>
                    <label><input type="checkbox" id="filter-geo" checked> <span class="dot geo"></span> GEO (&gt;35,786 km)</label>
                </div>
            </div>
        </div>

        <!-- Legend top-right -->
        <div class="legend-panel" id="globe-legend">
            <div class="legend-title">Orbital Regime</div>
            <div class="legend-item"><span class="dot leo"></span> LEO – Low Earth Orbit</div>
            <div class="legend-item"><span class="dot meo"></span> MEO – Medium Earth Orbit</div>
            <div class="legend-item"><span class="dot geo"></span> GEO – Geostationary Orbit</div>
            <div class="legend-divider"></div>
            <div class="legend-title">Current Time (UTC)</div>
            <div id="clock">--:--:--</div>
            <div class="legend-title" style="margin-top:6px;">Simulated Time</div>
            <div id="sim-clock">--:--:--</div>
        </div>

        <!-- Canvas for 3D globe -->
        <canvas id="globe-canvas"></canvas>
        <!-- SVG container for 2D map -->
        <div id="map-container" style="display:none; width:100%; height:100%;"></div>
    </div>

    <!-- ===== VIZ 2: ALTITUDE ===== -->
    <div id="altitude" class="viz-panel">
        <div class="control-panel" id="alt-controls">
            <div class="control-group">
                <label>Range</label>
                <div class="toggle-switch">
                    <button class="range-btn active" data-range="leo">LEO Focus (0–2,000 km)</button>
                    <button class="range-btn" data-range="full">Full Range</button>
                </div>
            </div>
        </div>
        <div id="alt-chart" style="width:100%; height:100%;"></div>
    </div>

    <!-- ===== VIZ 3: HEATMAP (NEW) ===== -->
    <div id="heatmap" class="viz-panel">
        <div id="heatmap-chart" style="width:100%; height:100%;"></div>
    </div>

    <!-- ===== VIZ 4: TIMELINE ===== -->
    <div id="timeline" class="viz-panel">
        <div class="control-panel" id="timeline-controls">
            <div class="control-group">
                <label>View</label>
                <div class="toggle-switch">
                    <button class="tl-btn active" data-mode="yearly">Yearly Count</button>
                    <button class="tl-btn" data-mode="cumulative">Cumulative</button>
                </div>
            </div>
        </div>
        <div id="timeline-chart" style="width:100%; height:100%;"></div>
    </div>

</div>

<!-- ===== BOTTOM INSIGHT BAR ===== -->
<div class="insight-bar">
    <div id="insight-text">
        <strong>Live Tracker</strong> — Real-time orbital positions of tracked debris. Drag to rotate (3D) or pan (2D). Hover objects for details. Use controls to filter by regime, search objects, or adjust time speed.
    </div>
</div>

<!-- ===== SCRIPTS ===== -->
<script src="js/main.js"></script>
<script src="js/globe.js"></script>
<script src="js/altitude.js"></script>
<script src="js/heatmap.js"></script>
<script src="js/timeline.js"></script>

</body>
</html>